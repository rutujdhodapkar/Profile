<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loading Counter</title>
    <style>
        @font-face {
            font-family: 'BitmapFont';
            src: url('BitmapFont.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        body {
            background: #FFF9F3; /* light creamy white */
            margin: 0;
            width: 100vw;
            height: 100vh;
            box-sizing: border-box;
            font-family: 'BitmapFont', monospace, sans-serif;
            overflow: hidden;
        }
        .counter-container {
            position: fixed;
            top: 50%;
            right: 5%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }
        .counter-text {
            font-size: 15rem; /* large font size */
            font-family: 'BitmapFont', monospace, sans-serif;
            color: #5d5d5d; /* dark gray */
            font-weight: 10; /* very thin font weight */
            letter-spacing: 10px;
            transition: font-size 0.2s;
        }
        .arrow-container {
            position: fixed;
            left: 5%;
            bottom: 5%;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }
        .arrow-font {
            font-size: 15rem;
            font-family: 'BitmapFont', monospace, sans-serif;
            color: #5d5d5d;
            line-height: 1;
            user-select: none;
            transition: font-size 0.2s;
        }
        /* --- NEW --- */
        .loading-bg-container {
            position: fixed;
            left: 5%;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            z-index: 10;
        }
        .loading-bg-box {
            background: #0f0f0f;
            border-radius: 1px;
            padding: 3px 23px;
            display: inline-block;
        }
        .loading-bg-text {
            font-family: 'VT323', 'Fira Mono', 'Consolas', monospace, Arial, Helvetica, sans-serif;
            font-size: 1.2rem;
            color: #fff;
            font-weight: normal;
            letter-spacing: -1px;
            white-space: nowrap;
        }
        /* Responsive styles for small screens */
        @media (max-width: 600px) {
            .counter-container {
                right: 2%;
                top: 40%;
            }
            .counter-text {
                font-size: 5.5rem;
                letter-spacing: 3px;
            }
            .arrow-container {
                left: 2%;
                bottom: 2%;
            }
            .arrow-font {
                font-size: 5rem;
            }
            .loading-bg-box {
                padding: 2px 8px;
            }
            .loading-bg-text {
                font-size: 0.75rem;
            }
            body {
                font-size: 14px;
            }
        }
        @media (max-width: 375px) {
            .counter-text {
                font-size: 3.3rem;
            }
            .arrow-font {
                font-size: 3.3rem;
            }
            .loading-bg-text {
                font-size: 0.67rem;
            }
        }
    </style>
</head>

<body>
    <div class="counter-container">
        <span class="counter-text" id="percentage-counter">000%</span>
    </div>
    <!-- New loading bg for left center -->
    <div class="loading-bg-container">
        <div class="loading-bg-box">
            <span class="loading-bg-text">LOADING...</span>
        </div>
    </div>
    <div class="arrow-container">
        <span class="arrow-font">&#8594;</span>
    </div>
    <script>
        // Speed control based on percentage
        function getDelayForPercent(percent) {
            // Make animation overall faster:
            if (percent < 70) return 8;
            if (percent < 95) return 30 + (percent - 70) * 5;
            if (percent < 100) return 90 + (percent - 95) * 30;
            return 0;
        }

        const counter = document.getElementById('percentage-counter');
        let current = 0;
        let animating = true;

        function pad(num) {
            // Always show three-digits minimum for loading (000â€“100)
            if (num < 10) return '00' + num;
            if (num < 100) return '0' + num;
            return num.toString();
        }

        function animateStep() {
            if (current <= 100) {
                let display = pad(current) + '%';
                counter.textContent = display;

                if (current < 100) {
                    let delay = getDelayForPercent(current); // dynamic speed
                    setTimeout(() => {
                        current++;
                        animateStep();
                    }, delay);
                } else {
                    // Stay on 100% for 0.5s, then redirect
                    setTimeout(() => {
                        // Device detection
                        function isMobile() {
                            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
                                || (window.innerWidth <= 640);
                        }
                        let base = isMobile() ? 'Mobile' : 'Desktop';
                        window.location.href = base + '/detail.html';
                    }, 500);
                }
            }
        }
        animateStep();
    </script>
</body>
</html>
