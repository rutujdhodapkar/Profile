<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio</title>
  <!-- Added Inter font for header -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+39&display=swap" rel="stylesheet">

  <style>
    #startup-blur-overlay {

      position: fixed;
      z-index: 99999;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255,255,255,1);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transition: background 1.2s cubic-bezier(.4,0,.2,1), backdrop-filter 1.2s cubic-bezier(.4,0,.2,1);
      pointer-events: none;
      will-change: background, backdrop-filter;
    }
    html, body {
      width: 100vw;
      min-height: 100vh;
      padding: 0;
      margin: 0;
    }
    body {
      font-family: 'BitmapFont', monospace, sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-color: #0f0f0f;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      will-change: background-color;
    }
    .frame-stack {
      width: 100vw;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .frame-no-gap {
      width: 100vw;
      margin: 0;
      padding: 0;
      border: none;
      display: block;
      box-sizing: border-box;
    }
    .top-frame {
      width: 100vw;
      height: 100vh;
      max-width: 100vw;
      max-height: 100vh;
      margin: 0;
      padding: 0;
      border-radius: 0;
      overflow: hidden;
      box-shadow: none;
      border: none;
      background: #070707;
      box-sizing: border-box;
      position: relative;
      z-index: 1;
      display: block;
    }
    .top-frame iframe {
      width: 100vw;
      height: 100vh;
      border: none;
      display: block;
      margin: 0;
      padding: 0;
    }
    @media (max-width: 900px) {
      .top-frame, .top-frame iframe {
        width: 100vw;
        height: 100vh;
        max-width: 100vw;
        max-height: 100vh;
        border-radius: 0;
      }
    }
    /* Add a 2px space/gap between the two frames */
    .frame-gap-2px {
      width: 100vw;
      height: 2px;
      background: transparent;
      display: block;
    }
    #rectiangleNavbar {
      position: fixed;
      top: 25px;
      left: 50%;
      transform: translateX(-50%);
      width: fit-content;
      padding: 9px 20px;
      background: rgba(255,255,255,0.08); /* transparent blur */
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 999px;
      z-index: 9999;
      transition: background-color 0.3s;
      font-family: 'Inter', monospace, sans-serif !important;
      /* Added shadow to header */
      box-shadow: 0 6px 32px 0 #0000002e, 0 1.5px 8px 0 #0000001a;
      border: 1px solid #ffffff59; /* 1px border */
      will-change: background-color;
    }
    #rectiangleNavbar:hover {
      background: rgba(255,255,255,0.16) !important;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    @media only screen and (max-width: 768px) {
      #rectiangleNavbar {
        display: none;
      }
    }
    #rectiangleNavbar .page-nav ul {
      list-style: none;
      display: flex;
      gap: 8px;
      padding: 0;
      margin: 0;
      position: relative;
      align-items: center;
    }
    #rectiangleNavbar .page-nav li {
      cursor: pointer;
      padding: 5px 12px;
      transition: background-color 0.3s, color 0.3s, transform 0.22s cubic-bezier(.36,1,.1,1);
      border-radius: 80px;
      position: relative;
      font-family: 'Inter', monospace, sans-serif !important;
      color: #fff !important; /* Make text white on header */
      background: none;
      border: none;
      display: flex;
      align-items: center;
      will-change: background-color, color, transform;
    }
    #rectiangleNavbar .page-nav li.active {
      background-color: #fff !important; /* selection box white */
      color: #070707 !important; /* Make text inside highlight dark */
      z-index: 2;
    }
    #rectiangleNavbar .page-nav li.active strong {
      color: #070707 !important; /* For strong-Home, About, ... */
    }
    #rectiangleNavbar .page-nav li:hover:not(.active) {
      background-color: rgba(255,255,255,0.18) !important;
      color: #fff !important;
      transform: scale(1.07);
      will-change: background-color, color, transform;
    }
    #rectiangleNavbar .page-nav li:not(.active) strong {
      color: #fff !important;
    }

    /* Resume button special styling */
    #rectiangleNavbar .page-nav li#resume-nav-btn {
      background: transparent !important;
      color: #fff !important;
      font-weight: bold;
      border: 1.2px solid #fff !important;
      box-shadow: 0 2px 10px 0 rgba(0,0,0,0.04);
      transition: background 0.15s, color 0.15s, box-shadow 0.15s;
      margin-left: 10px;
      margin-right: 0;
      padding: 5px 18px;
      position: relative;
      border-radius: 120px;
      will-change: background-color, color, border;
    }

    #rectiangleNavbar .page-nav li#resume-nav-btn:hover {
      background: transparent !important;
      color: #fff !important;
      box-shadow: 0 2px 10px 0 rgba(0,0,0,0.04);
      transform: none;
      border: 1.2px solid #fff !important;
    }

    .highlight {
      position: absolute;
      top: -4px;
      left: 0;
      height: calc(100% + 8px);
      background-color: #fff !important;
      border-radius: 80px;
      z-index: 1;
      transition: left 0.33s cubic-bezier(.36,1,.1,1), width 0.3s cubic-bezier(.36,1,.1,1), height 0.3s cubic-bezier(.36,1,.1,1), background-color 0.3s;
      pointer-events: none;
      box-shadow: 0 2px 14px 0 rgba(0,0,0,0.10);
      will-change: left, width, height, background-color;
    }
    #rectiangleNavbar a {
      text-decoration: none;
      color: inherit;
      font-family: 'Inter', monospace, sans-serif !important;
      display: flex;
      align-items: center;
    }

    .scroll-anchor {
      display: block;
      position: relative;
      visibility: hidden;
      height: 0;
      margin: 0;
      padding: 0;
    }

    ::selection {
      background: #fff;
      color: #000;
    }

    /* New styles for full-screen black overlay with AI text */
    #ai-fullscreen-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: black;
      z-index: 9999;
      display: none;
      opacity: 0;
      transition: opacity 1s cubic-bezier(.36,1,.1,1);
      justify-content: center;
      align-items: center;
      will-change: opacity;
    }
    #ai-text {
      color: white;
      font-family: 'BitmapFont', sans-serif;
      font-weight: 100;
      font-size: 3rem;
      text-align: center;
      max-width: 80%;
      opacity: 0;
      transition: opacity 1s cubic-bezier(.36,1,.1,1);
      will-change: opacity;
    }
  </style>
  <div id="startup-blur-overlay"></div>
  <script>
    // Optimize overlay transitions: only use setTimeouts, don't thrash layout
    window.addEventListener('DOMContentLoaded', function() {
      requestAnimationFrame(function(){
        setTimeout(function() {
          const overlay = document.getElementById('startup-blur-overlay');
          if (overlay) {
            overlay.style.background = 'rgba(255,255,255,0)';
            overlay.style.backdropFilter = 'blur(0px)';
            overlay.style.webkitBackdropFilter = 'blur(0px)';
            setTimeout(function() {
              overlay.parentNode && overlay.parentNode.removeChild(overlay);
            }, 1300);
          }
        }, 100);
      });
    });
  </script>
</head>
<body>
  <!-- Navigation -->
  <div id="rectiangleNavbar" class="rectriangle">
    <nav class="page-nav">
      <ul>
        <li data-section="home"><a href="#home" id="home-nav-link"><strong>Home</strong></a></li>
        <li data-section="about"><a href="#about"><strong>About</strong></a></li>
        <li data-section="skills"><a href="#skills"><strong>Skills</strong></a></li>
        <li data-section="education"><a href="#education"><strong>Education</strong></a></li>
        <li data-section="certificates"><a href="#certificates"><strong>Certificates</strong></a></li>
        <li data-section="projects"><a href="#projects"><strong>Projects</strong></a></li>
        <li data-section="contact"><a href="#contact" id="contact-nav-link"><strong>Contact</strong></a></li>
        <li data-section="resume" id="resume-nav-btn">
          <a href="#" id="resume-nav-link">
            <strong>Resume</strong>
          </a>
        </li>
        <div class="highlight"></div>
      </ul>
    </nav>
  </div>

  <!-- New full-screen overlay for AI text -->
  <div id="ai-fullscreen-overlay">
    <div id="ai-text"></div>
  </div>

  <script>
    // Smoother main nav highlight - reduce work on scroll and layout calls. Debounced/throttled
    document.addEventListener('DOMContentLoaded', function() {
      // Step 2: Define REAL SECTION_MAP
      const SECTION_MAP = [
        { id: "home", el: document.getElementById("top-frame") },
        { id: "about", el: document.querySelector('iframe[src="info.html"]') },
        { id: "skills", el: document.querySelector('iframe[src="skill.html"]') },
        { id: "education", el: document.querySelector('iframe[src="Education.html"]') },
        { id: "certificates", el: document.querySelector('iframe[src="certificate.html"]') },
        { id: "projects", el: document.querySelector('iframe[src="project section.html"]') },
        { id: "contact", el: document.querySelector('iframe[src="contact.html"]') }
      ];

      var ticking = false;

      // Home navigation click: scroll to top
      var homeNavLink = document.getElementById('home-nav-link');
      if (homeNavLink) {
        homeNavLink.addEventListener('click', function(e) {
          e.preventDefault();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      // Resume navigation click: open resume.html in new tab
      var resumeNavLink = document.getElementById('resume-nav-link');
      if (resumeNavLink) {
        resumeNavLink.addEventListener('click', function(e) {
          e.preventDefault();
          window.open('resume.html', '_blank');
        });
      }

      if (window.innerWidth > 768) {
        const navbar = document.getElementById('rectiangleNavbar');
        const navItems = document.querySelectorAll("#rectiangleNavbar .page-nav li");
        const highlight = document.querySelector("#rectiangleNavbar .highlight");
        let lastActiveSection = null;
        let highlightCache = { left: null, width: null, height: null };

        // Step 4: Replace nav click scrolling logic
        navItems.forEach(item => {
          const sectionId = item.getAttribute("data-section");
          if (!sectionId || sectionId === "resume") return;

          item.addEventListener("click", e => {
            e.preventDefault();

            const section = SECTION_MAP.find(s => s.id === sectionId);
            if (!section || !section.el) return;

            const top = section.el.getBoundingClientRect().top + window.scrollY;
            const offset = document.getElementById("rectiangleNavbar").offsetHeight + 20;

            window.scrollTo({
              top: Math.max(top - offset, 0),
              behavior: "smooth"
            });
          });
        });

        // Use 55% of viewport as marker for highlight - now throttled with rAF for smoothness
        function highlightNavOnScroll() {
          if (!ticking) {
            window.requestAnimationFrame(_update);
            ticking = true;
          }
        }
        function _update() {
          const viewportMarkerY = window.scrollY + window.innerHeight * 0.55;
          let activeSection = null;
          let foundAny = false;
          for (const section of SECTION_MAP) {
            if (!section.el) continue;
            const rect = section.el.getBoundingClientRect();
            const top = rect.top + window.scrollY;
            const bottom = top + rect.height;
            if (viewportMarkerY >= top && viewportMarkerY <= bottom) {
              activeSection = section.id;
              foundAny = true;
              break;
            }
          }
          if (foundAny) {
            lastActiveSection = activeSection;
          } else {
            activeSection = lastActiveSection;
          }
          navItems.forEach(item => {
            const section = item.getAttribute("data-section");
            const isActive = section === activeSection;
            item.classList.toggle("active", isActive);
          });
          updateHighlight();
          ticking = false;
        }

        window.addEventListener("scroll", highlightNavOnScroll, { passive: true });
        window.addEventListener("resize", highlightNavOnScroll);

        // Optimized highlight position/animation on header - avoid layout thrash, only update if needed
        function updateHighlight() {
          const activeItem = document.querySelector("#rectiangleNavbar .page-nav li.active");
          if (activeItem) {
            const { offsetLeft, offsetWidth, offsetHeight } = activeItem;
            if (highlightCache.left !== offsetLeft-4 || highlightCache.width !== offsetWidth+8 || highlightCache.height !== offsetHeight+8) {
              highlight.style.left = (offsetLeft - 4) + "px";
              highlight.style.width = (offsetWidth + 8) + "px";
              highlight.style.height = (offsetHeight + 8) + "px";
              highlight.style.backgroundColor = "#fff";
              highlight.style.display = 'block';
              highlightCache = {
                left: offsetLeft-4,
                width: offsetWidth+8,
                height: offsetHeight+8
              };
            }
          } else {
            highlight.style.display = 'none';
          }
        }

        navItems.forEach(item => {
          item.addEventListener('mouseenter', function() {
            if (this.classList.contains('active')) {
              highlight.style.backgroundColor = "#fff";
            }
          });
          item.addEventListener('mouseleave', function() {
            if (this.classList.contains('active')) {
              highlight.style.backgroundColor = "#fff";
            }
          });
        });

        // initialize (highlight stays where it is if no frame at 55%, otherwise tracks section)
        setTimeout(function() {
          window.scrollTo({ top: 0, behavior: "auto" });
          highlightNavOnScroll();
        }, 0);
      }
      // 1. Contact redirection logic removed as instructed.
    });
    // No scroll-to-top redirect (per request)
  </script>

  <!-- Main content -->
  <div class="frame-stack">
    <!-- Both frames with a 2px space between them -->
    <div class="top-frame" id="top-frame">
      <!-- Adding allow="none" as no special features needed, add sandbox -->
      <iframe src="Main.html" scrolling="no" title="Main" allow="none" sandbox="allow-scripts allow-same-origin" data-memory-limit="50mb"></iframe>
    </div>
    <div class="frame-gap-2px"></div>
    <iframe class="frame-no-gap" src="info.html" style="width:100vw;height:690px;min-height:400px;max-width:100vw;border:none;overflow:hidden;display:block;padding:0;margin:0;" scrolling="no" allow="none" sandbox="allow-scripts allow-same-origin" data-memory-limit="50mb"></iframe>
  </div>
  <style>
    .edge-tech-line {
      font-family:'BitmapFont', sans-serif;
      width: 100%;
      text-align: center;
      font-size: 1em;
      font-weight: 500;
      margin: 32px 0 18px 0;
      letter-spacing: 1px;
      color: #ffffff;
    }
  </style>
  <div class="edge-tech-line">
    I don't just code — I build sht that pushes the edge of tech*.
  </div>
<br>
<br>
<div style="width:90%;margin:12px auto;text-align:center;letter-spacing:4px;font-size:18px;color:#bbb; font-family: 'BitmapFont', 'inter', sans-serif;"></div>
<iframe src="skill.html" style="width:100%; height:450px; border:none; overflow:hidden;" scrolling="no" allow="none" sandbox="allow-scripts allow-same-origin" data-memory-limit="50mb"></iframe>
 <div class="ai-message-block">
  <div>
    and... sometimes I get a lot on my mind so I write it out as 
    <a href="https://researchrutujdhodapkar.vercel.app" target="_blank" rel="noopener noreferrer" style="color:#fff; text-decoration:underline; text-underline-offset:3px; font-weight:500;">blogs
    </a>
  </div>
</div>
<style>
  @font-face {
    font-family: 'OutlineFont';
    src: url('OutlineFont-Regular.ttf') format('truetype');
  }
  .scroll-move-text-container {
    position: relative;
    width: 100vw;
    height: 320px;
    overflow: hidden;
    margin: 40px 0 30px 0;
    z-index: 10;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    gap: 0;
    justify-content: center;
    will-change: transform;
    /* GPU: promote to own layer */
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  .scroll-move-text {
    position: absolute;
    left: 0;
    white-space: nowrap;
    font-size: 4.5rem;
    font-family: 'OutlineFont', sans-serif;
    font-weight: 600;
    color: transparent;
    -webkit-text-stroke: 0.5px #ffffff84;
    text-shadow: none;
    transition: color 0.2s;
    user-select: none;
    pointer-events: none;
    width: 100vw;
    will-change: transform;
    /* GPU: promote animation to GPU layer */
    transform: translate3d(0,0,0);
    backface-visibility: hidden;
    /* Avoid subpixel blurring on some browsers */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .scroll-move-text .intern-text {
    font-family: 'Inter', sans-serif !important;
    color: #fff !important;
    -webkit-text-stroke: 0 !important;
    text-shadow: none !important;
    font-weight: 700;
    letter-spacing: 0.01em;
    background: none;
    padding: 0;
    display: inline;
  }
  .scroll-move-text.line1 { top: 20%; }
  .scroll-move-text.line2 { top: 50%; }
  .scroll-move-text.line3 { top: 80%; }
  @media (max-width: 700px) {
    .scroll-move-text {
      font-size: 2.2rem;
    }
    .scroll-move-text-container {
      height: 160px;
    }
    .scroll-move-text.line1 { top: 20%; }
    .scroll-move-text.line2 { top: 50%; }
    .scroll-move-text.line3 { top: 80%; }
  }
</style>
<div class="scroll-move-text-container">
  <div class="scroll-move-text line1" id="scrollMoveText1">
    Building <span class="intern-text">Artificial Intelligence</span> Systems
  </div>
  <div class="scroll-move-text line2" id="scrollMoveText2">
    To Build <span class="intern-text">Next Generation</span> of <span class="intern-text">Humanity</span>
  </div>
  <div class="scroll-move-text line3" id="scrollMoveText3">
    With <span class="intern-text">Creativity</span> and <span class="intern-text">Precision</span>
  </div>
</div>

<script>
  // Smoother, throttled scroll-move animation using GPU transforms
  (function() {
    const SPEED_FACTOR = 1.4;
    const text1 = document.getElementById('scrollMoveText1');
    const text2 = document.getElementById('scrollMoveText2');
    const text3 = document.getElementById('scrollMoveText3');
    const container = document.querySelector('.scroll-move-text-container');
    let prevProgress = -1;
    let ticking = false;

    function to3dTransform(yPercent, x) {
      // Always use translate3d for GPU acceleration
      return `translateY(${yPercent}) translate3d(${x}px,0,0)`;
    }

    function updateTextPosition() {
      if (!container.offsetWidth) {
        requestAnimationFrame(updateTextPosition);
        return;
      }
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      let progress = docHeight > 0 ? Math.min(Math.max(scrollTop / docHeight, 0), 1) : 0;
      progress = Math.min(progress * SPEED_FACTOR, 1);
      if (Math.abs(progress - prevProgress) < 0.001) {
        ticking = false;
        return;
      }
      prevProgress = progress;
      const containerW = container.offsetWidth;
      const text1Width = text1.offsetWidth;
      const start1 = containerW;
      const end1 = -text1Width;
      const translateX1 = start1 + (end1 - start1) * progress;
      text1.style.transform = to3dTransform("-50%", translateX1);

      const text2Width = text2.offsetWidth;
      const start2 = -text2Width;
      const end2 = containerW;
      const translateX2 = start2 + (end2 - start2) * progress;
      text2.style.transform = to3dTransform("-50%", translateX2);

      const text3Width = text3.offsetWidth;
      const start3 = containerW;
      const end3 = -text3Width;
      const translateX3 = start3 + (end3 - start3) * progress;
      text3.style.transform = to3dTransform("-40%", translateX3);

      ticking = false;
    }

    function requestTick() {
      if (!ticking) {
        requestAnimationFrame(updateTextPosition);
        ticking = true;
      }
    }

    // Use passive scroll event for less jank, and promote layers for GPU anim
    window.addEventListener('scroll', requestTick, { passive: true });
    window.addEventListener('resize', function() {
      prevProgress = -1;
      requestTick();
    });
    setTimeout(requestTick, 150);
  })();
</script>

  <div style="width:90%;margin:12px auto;text-align:center;letter-spacing:4px;font-size:18px;color:#bbb; font-family: 'BitmapFont', 'inter', sans-serif;"></div>
  <iframe src="Education.html" style="width:100%; height:700px; border:none; overflow:hidden;" scrolling="no" allow="none" sandbox="allow-scripts allow-same-origin" id="education" data-memory-limit="50mb"></iframe>
  <div class="ai-message-block">
    <div>
      Still doubt if my knowledge is real? Check my:
    </div>
  </div>
  <div style="width:90%;margin:12px auto;text-align:center;letter-spacing:4px;font-size:18px;color:#bbb; font-family: 'BitmapFont', 'inter', sans-serif;"></div>
  <div id="certificate-frame" style="width:100%; height:700px; border:none; overflow:hidden; position:relative; z-index:5;">
    <div class="wrap" id="wrap"></div>
    <div class="fade"></div>

    <iframe
      id="certificateIframe"
      src="certificate.html"
      title="Certificates"
      style="width:100%;height:100%;border:none;display:block;"
      scrolling="yes"
      allow="fullscreen; autoplay; clipboard-read; encrypted-media"
      sandbox="allow-same-origin allow-scripts allow-popups"
    ></iframe>
  </div>
  <script>
    window.addEventListener("message", function(event) {
      if(typeof event.data === "object" && event.data.type === "open-in-new-tab" && event.data.url) {
        window.open(event.data.url, "_blank", "noopener");
      }
    });
  </script>
  <style>
    .edge-tech-line {
      font-family:'BitmapFont', sans-serif;
      width: 100%;
      text-align: center;
      font-size: 1em;
      font-weight: 500;
      margin: 32px 0 18px 0;
      letter-spacing: 1px;
      color: #ffffffa3;
    }
  </style>
  <iframe src="project section.html" style="width:100%; height:1300px; border:none; overflow:hidden; display:block;" scrolling="no" allow="none" sandbox="allow-scripts allow-same-origin" data-memory-limit="50mb"></iframe>
  <style>
    @font-face {
      font-family: 'BitmapFont';
      src: url('BitmapFont.ttf') format('truetype');
      font-display: swap;
    }
    .ai-message-block {
      width: 90%;
      margin: 24px auto 0 auto;
      text-align: center;
      letter-spacing: 1.5px;
      font-size: 1em;
      color: #aaa;
      font-family: 'BitmapFont', 'inter', sans-serif;
      opacity: 0.92;
    }
    .ai-message-block > div {
      font-size: 1.08em;
      margin-bottom: 6px;
    }
  </style>
  <div class="ai-message-block">
    <div>
      Best AI isn’t defined by intelligence alone, but by its ability to elevate humanity.
    </div>
  </div>
  
  <!-- Google Fonts: Libre Barcode 39 -->
  <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+39&display=swap" rel="stylesheet">
  <div style="
    margin: 0 auto;
    width: fit-content;
    z-index: 2;
    font-family: 'Libre Barcode 39', cursive, sans-serif;
    font-size: 2.5rem;
    color: #fff;
    background: #0f0f0f;
    border-radius: 10px;
    padding: 10px 28px;
    box-shadow: 0 4px 24px 0 #00000000;
    letter-spacing: 2px;
    font-weight: 400;
    text-align: center;
    backdrop-filter: blur(8px);
    position: static;
    display: block;
  ">
    I just wanna study.research in AI at Large scale.
    <br>
    <br>
    <br>
    <br>
    <br>
  </div>

  <!-- Add contact.html frame at the bottom -->
  <iframe src="contact.html" style="width:100%; height:700px; border:none; overflow:hidden; display:block;" scrolling="no" allow="none" sandbox="allow-scripts allow-same-origin" data-memory-limit="50mb"></iframe>
<!-- NOTE: animation is now inlined above (no separate animation iframe) -->

</body>
<script>
document.documentElement.style.scrollBehavior = "smooth";
(function(){
  const animFrame = document.getElementById('animation-frame');
  function broadcastScroll() {
    // Forward scroll state to inline animation if present, otherwise fallback to iframe messaging
    const cert = document.getElementById('certificate-frame');
    const rect = cert ? cert.getBoundingClientRect() : { top: 0, left: 0, width: 0, height: 0 };
    const certTopInDoc = rect.top + window.scrollY;
    const relativeY = window.scrollY - certTopInDoc;
    const payload = {
      scrollY: window.scrollY || 0,
      relativeY: relativeY,
      certRect: { top: certTopInDoc, left: rect.left + window.scrollX, width: rect.width, height: rect.height },
      viewportHeight: window.innerHeight
    };
    if (typeof window.setInlineAnimationTarget === 'function') {
      // Inline animation present — call its setter directly
      window.setInlineAnimationTarget(payload);
    } else if (animFrame && animFrame.contentWindow) {
      animFrame.contentWindow.postMessage(Object.assign({ type: 'scroll-sync' }, payload), '*');
    }
  }
  let ticking = false;
  function onScroll() {
    if (!ticking) {
      requestAnimationFrame(function(){
        broadcastScroll();
        ticking = false;
      });
      ticking = true;
    }
  }
  window.addEventListener('scroll', onScroll, { passive: true });
  window.addEventListener('resize', broadcastScroll);
  if (animFrame) animFrame.addEventListener('load', broadcastScroll);
  // Track last mouse pos and forward wheel deltas only when pointer is over certificate frame
  let lastMouse = { x: 0, y: 0 };
  window.addEventListener('mousemove', function(e){ lastMouse.x = e.clientX; lastMouse.y = e.clientY; }, { passive: true });
  window.addEventListener('wheel', function(e){
    const cert = document.getElementById('certificate-frame');
    if (!cert) return;
    const rect = cert.getBoundingClientRect();
    const isOver = lastMouse.x >= rect.left && lastMouse.x <= rect.right && lastMouse.y >= rect.top && lastMouse.y <= rect.bottom;
    if (isOver) {
      // If pointer is directly over the certificate iframe, let the iframe receive wheel events
      const elAtPointer = document.elementFromPoint(lastMouse.x, lastMouse.y);
      if (elAtPointer && (elAtPointer.id === 'certificateIframe' || (elAtPointer.tagName === 'IFRAME' && elAtPointer.parentElement && elAtPointer.parentElement.id === 'certificate-frame'))) {
        return;
      }
      if (typeof window.inlineAnimationWheelDelta === 'function') {
        window.inlineAnimationWheelDelta(e.deltaY);
      } else if (animFrame && animFrame.contentWindow) {
        animFrame.contentWindow.postMessage({ type: 'wheel-delta', deltaY: e.deltaY }, '*');
      }
    }
  }, { passive: true });
})();
</script>
<!-- Inline animated pattern CSS + JS (was previously in a separate iframe) -->
<style>
  /* Animated pattern styles (constrained to #certificate-frame) */
  #certificate-frame { position: relative; overflow: hidden; }
  #certificate-frame .wrap {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 22px;
    transform: rotate(-28deg);
    transform-origin: center;
    pointer-events: none;
    z-index: 0;
    will-change: transform;
  }
  #certificate-frame .row {
    display: flex;
    white-space: nowrap;
    font-size: 64px;
    font-weight: 700;
    color: #fff;
    /* Prevent BitmapFont from applying here — use Inter/system fallback */
    font-family: 'Inter', system-ui, Arial, sans-serif;
    opacity: 0.96;
    will-change: transform;
    pointer-events: none;
  }
  #certificate-frame .row span { margin-right: 80px; }
  #certificate-frame .fade {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    background: linear-gradient(
      to bottom,
      #0f0f0f 0%,
      transparent 18%,
      transparent 82%,
      #0f0f0f 100%
    );
    z-index: 4;
  }
  /* Certificate iframe (interactive full-featured) */
  #certificate-frame > #certificateIframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    display: block;
    z-index: 6;
    background: transparent;
  }
</style>
<script>
  // Inlined animated infinite rows (adapted from animations/new pattern.html)
  (function() {
    const container = document.getElementById("certificate-frame");
    const wrap = container && container.querySelector("#wrap");
    if (!wrap || !container) return;
    const ROWS = 18;
    const WORD = "Artificial Intelligence";
    const COPIES = 16;
    const rowData = [];
    let targetScroll = 0;
    let smoothScroll = 0;

    for (let i = 0; i < ROWS; i++) {
      const row = document.createElement("div");
      row.className = "row";
      for (let j = 0; j < COPIES; j++) {
        const span = document.createElement("span");
        span.textContent = WORD;
        row.appendChild(span);
      }
      wrap.appendChild(row);
      rowData.push({
        el: row,
        dir: i % 2 === 0 ? 1 : -1,
        // Lower base speeds so overall motion is slower
        speed: 0.12 + Math.random() * 0.08,
        offset: Math.random() * 10000,
        width: 0
      });
    }

    requestAnimationFrame(() => {
      rowData.forEach(r => { r.width = r.el.scrollWidth / 2; });
    });

    // Exposed API for the parent document to forward scroll state and wheel deltas
    // Reduce wheel multiplier slightly for smoother motion, and make small changes more responsive.
    // Impulse-based input model: wheel and sync messages add velocity directly.
    // This produces a sliding-on-ice feel (move then slowly stop).
    // Lower impulses and max velocity to reduce overall speed
    const WHEEL_IMPULSE = 0.35;
    const SYNC_IMPULSE_SCALE = 0.25;
    const DAMPING = 0.96;
    let lastRelativeY = null;
    window.inlineAnimationWheelDelta = function(deltaY) {
      // Apply immediate impulse to velocity; positive deltaY -> move down/right
      velocity += (deltaY || 0) * WHEEL_IMPULSE;
    };
    window.setInlineAnimationTarget = function(data) {
      if (data && typeof data === 'object' && typeof data.relativeY === 'number') {
        // If we don't have a last value, just record and don't apply impulse
        if (lastRelativeY === null) {
          lastRelativeY = data.relativeY;
          return;
        }
        const delta = data.relativeY - lastRelativeY;
        // Add scaled impulse based on how much the page scrolled past the certificate area
        velocity += delta * SYNC_IMPULSE_SCALE;
        lastRelativeY = data.relativeY;
      } else if (data && typeof data === 'object' && typeof data.scrollY === 'number') {
        // Fallback: drive by change of scrollY
        if (lastRelativeY === null) {
          lastRelativeY = data.scrollY;
          return;
        }
        const delta = data.scrollY - lastRelativeY;
        velocity += delta * SYNC_IMPULSE_SCALE;
        lastRelativeY = data.scrollY;
      }
    };

    // Velocity-based sliding: inputs provide impulses; velocity decays via damping.
    let velocity = 0;
    const MAX_VEL = 120;
    function animate() {
      // Integrate velocity into position
      smoothScroll += velocity;
      // Apply damping so the motion slowly comes to rest (slippery)
      velocity *= DAMPING;
      // Prevent infinitesimal oscillation
      if (Math.abs(velocity) < 0.01) velocity = 0;
      // Clamp velocity just in case
      if (velocity > MAX_VEL) velocity = MAX_VEL;
      if (velocity < -MAX_VEL) velocity = -MAX_VEL;

      rowData.forEach(r => {
        const raw = (smoothScroll * r.speed + r.offset) * r.dir;
        const looped = ((raw % r.width) + r.width) % r.width;
        r.el.style.transform = `translateX(${-looped}px)`;
      });
      requestAnimationFrame(animate);
    }
    animate();
    // Recompute row widths on resize/visibility changes to keep transform math accurate
    function recomputeWidths() {
      rowData.forEach(r => { r.width = r.el.scrollWidth / 2 || r.width || 1; });
    }
    window.addEventListener('resize', function() {
      // Recompute widths after layout settles
      setTimeout(recomputeWidths, 60);
    }, { passive: true });
    // Also recalc when container becomes visible or fonts load
    document.fonts && document.fonts.ready && document.fonts.ready.then(recomputeWidths);
  })();
</script>

<style>
::-webkit-scrollbar {
  display: none;
}
html {
  scrollbar-width: none;
}
</style>


</html>

